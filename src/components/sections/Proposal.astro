---
import Card from "../ui/Card.astro";
import Section from "./Section.astro";

import c1 from "../../assets/pics/feature-1.jpg";
import c2 from "../../assets/pics/feature-2.jpg";
import c3 from "../../assets/pics/feature-3.jpg";
import c4 from "../../assets/pics/feature-4.jpg";

// Array of images for easier management
const images = [
  { src: c1, alt: "Feature 1" },
  { src: c2, alt: "Feature 2" },
  { src: c3, alt: "Feature 3" },
  { src: c4, alt: "Feature 4" },
];
---

<Section>
  <Card>
    <div class="bg-[#F8F9FE] rounded-[24px] p-6 md:p-8 relative my-20">
      <div class="flex flex-col md:flex-row items-center gap-6">
        <!-- Text Section -->
        <div class="w-full md:w-[45%] flex flex-col gap-4">
          <h2 class="text-2xl font-medium">Ready to hit the road?</h2>
          <p class="text-gray-700 text-sm">
            Join our beta testing program today and be among the first riders to experience 
            the future of motorcycle journey planning and community building.
          </p>
          <a href="https://forms.gle/cKZhwtwsHWFWuZMs6">
            <button class="px-6 py-3 bg-[#1557E7] hover:bg-[#4178eb] active:bg-white active:text-[#1557E7] rounded-xl text-center text-white border-[#1557E7] border transition-colors duration-100 text-base font-normal">
              Start your journey
            </button>
          </a>
        </div>

        <!-- Carousel Section -->
        <div class="w-full md:w-[55%]">
          <div class="swiper h-[300px] rounded-lg">
            <div class="swiper-wrapper">
              {images.map((image) => (
                <div class="swiper-slide">
                  <img 
                    src={image.src.src} 
                    alt={image.alt}
                    class="w-full h-full object-cover rounded-lg"
                  />
                </div>
              ))}
            </div>
          </div>
        </div>
      </div>
    </div>
  </Card>
</Section>

<script>
  import Swiper from 'swiper';
  import { EffectFade, Autoplay } from 'swiper/modules';
  import 'swiper/css';
  import 'swiper/css/effect-fade';

  let swiper: Swiper | null = null;

  function initSwiper() {
    if (swiper) return;
    
    swiper = new Swiper('.swiper', {
      modules: [EffectFade, Autoplay],
      effect: 'fade',
      fadeEffect: {
        crossFade: true
      },
      loop: true,
      speed: 800,
      autoplay: {
        delay: 5000,
        disableOnInteraction: false,
      },
    });

    // // Custom navigation
    // const prevBtn = document.querySelector('.swiper-prev');
    // const nextBtn = document.querySelector('.swiper-next');

    // prevBtn?.addEventListener('click', () => {
    //   swiper?.slidePrev();
    // });

    // nextBtn?.addEventListener('click', () => {
    //   swiper?.slideNext();
    // });
  }

  // Initialize on page load
  if (document.readyState === 'complete') {
    initSwiper();
  } else {
    window.addEventListener('load', initSwiper);
  }
</script>

<style>
  .swiper-slide {
    opacity: 0 !important;
    transition: opacity 0.3s ease;
  }
  
  .swiper-slide-active {
    opacity: 1 !important;
  }
</style>